<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>حاسبة التسعير</title>

<style>
body {
    font-family: Tahoma, Arial;
    background: #f5f5f5;
}
.box {
    max-width: 360px;
    margin: 40px auto;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,.1);
}
input {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    font-size: 16px;
}
.result {
    background: #eee;
    padding: 10px;
    border-radius: 6px;
    margin-bottom: 10px;
}
</style>
</head>

<body>

<div class="box">
    <h3>حاسبة التسعير</h3>

    <input type="number" id="price" placeholder="ادخل السعر" oninput="calc()">

    <div class="result">النسبة: <span id="percent">-</span></div>
    <div class="result">صافي الربح: <span id="profit">-</span></div>
    <div class="result">سعر البيع: <span id="sell">-</span></div>
</div>

<script>
let ranges = [];

fetch(https://docs.google.com/spreadsheets/d/e/2PACX-1vRLGxxIqrjl0big4j4s2B9rvxEBTZ4ZqoyCDksCCPZXNpiEii_mSbSasgKZAYMlSA/pub?gid=237098079&single=true&output=csv)
.then(res => res.text())
.then(csv => {
    let rows = csv.split("\n").slice(1);
    rows.forEach(row => {
        let [from, to, percent] = row.split(",");
        ranges.push({
            from: parseFloat(from),
            to: parseFloat(to),
            percent: parseFloat(percent)
        });
    });
});

function calc() {
    let price = parseFloat(document.getElementById("price").value);
    if (isNaN(price)) return;

    let percent = 0;

    ranges.forEach(r => {
        if (price >= r.from && price <= r.to) {
            percent = r.percent;
        }
    });

    let profit = price * percent;
    let sell = price + profit;

    document.getElementById("percent").innerText = (percent * 100) + "%";
    document.getElementById("profit").innerText = profit.toFixed(2);
    document.getElementById("sell").innerText = sell.toFixed(2);
}
</script>

</body>
</html>
